@Entry
@Component
struct SplashPage {
  @State currentStep: number = 0
  private steps: string[] = [
    'æ™ºèƒ½è¯ä»¶ç®¡ç†',
    'AIè¯†åˆ«æŠ€æœ¯',
    'ä¸€é”®ç¼–è¾‘ç¾åŒ–',
    'æ— çº¿æ‰“å°åŠŸèƒ½'
  ]

  aboutToAppear() {
    this.startAnimation()
  }

  startAnimation() {
    let stepIndex = 0
    const interval = setInterval(() => {
      this.currentStep = stepIndex
      stepIndex++
      
      if (stepIndex >= this.steps.length) {
        clearInterval(interval)
        setTimeout(() => {
          this.navigateToMain()
        }, 1000)
      }
    }, 1500)
  }

  build() {
    Stack() {
      // èƒŒæ™¯
      Column() {
        Image($r('app.media.background'))
          .width('100%')
          .height('100%')
          .objectFit(ImageFit.Cover)
      }
      .width('100%')
      .height('100%')

      // å†…å®¹åŒºåŸŸ
      Column() {
        // LogoåŒºåŸŸ
        Column() {
          Image($r('app.media.foreground'))
            .width(120)
            .height(120)
            .borderRadius(60)
            .margin({ bottom: 20 })

          Text('è¯ä»¶ç®¡ç†')
            .fontSize(32)
            .fontWeight(FontWeight.Bold)
            .fontColor(Color.White)
            .margin({ bottom: 8 })

          Text('å®‰å…¨ Â· é«˜æ•ˆ Â· æ™ºèƒ½')
            .fontSize(16)
            .fontColor('#E0E0E0')
        }
        .width('100%')
        .justifyContent(FlexAlign.Center)
        .margin({ top: 100 })

        // åŠŸèƒ½å±•ç¤º
        Column() {
          Text(this.steps[this.currentStep])
            .fontSize(24)
            .fontWeight(FontWeight.Medium)
            .fontColor(Color.White)
            .textAlign(TextAlign.Center)
            .margin({ bottom: 20 })

          // åŠŸèƒ½å›¾æ ‡
          Row() {
            ForEach(['ğŸ“±', 'ğŸ¤–', 'âœï¸', 'ğŸ–¨ï¸'], (icon: string, index: number) => {
              Text(icon)
                .fontSize(32)
                .opacity(index === this.currentStep ? 1 : 0.3)
                .margin({ right: 20 })
                .animation({
                  duration: 300,
                  curve: Curve.EaseInOut
                })
            })
          }
          .justifyContent(FlexAlign.Center)
        }
        .width('100%')
        .layoutWeight(1)
        .justifyContent(FlexAlign.Center)

        // è¿›åº¦æŒ‡ç¤ºå™¨
        Row() {
          ForEach(this.steps, (step: string, index: number) => {
            Circle()
              .width(8)
              .height(8)
              .fill(index === this.currentStep ? Color.White : '#80FFFFFF')
              .margin({ right: 8 })
              .animation({
                duration: 300,
                curve: Curve.EaseInOut
              })
          })
        }
        .justifyContent(FlexAlign.Center)
        .margin({ bottom: 50 })
      }
      .width('100%')
      .height('100%')
    }
    .width('100%')
    .height('100%')
  }

  private navigateToMain() {
    console.log('å¯¼èˆªåˆ°ä¸»é¡µé¢')
    // è¿™é‡Œåº”è¯¥ä½¿ç”¨è·¯ç”±å¯¼èˆªåˆ°ä¸»é¡µé¢
  }
} 